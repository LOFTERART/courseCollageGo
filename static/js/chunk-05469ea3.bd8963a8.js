(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05469ea3"],{"287e":function(e,t,i){},"365c":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n}));var r=i("b775");function a(e){return Object(r["a"])({url:"/admin/weChatIndex",method:"post",data:e})}function n(){return Object(r["a"])({url:"/admin/weChatIndex/list",method:"post"})}},"456d":function(e,t,i){var r=i("4bf8"),a=i("0d58");i("5eda")("keys",(function(){return function(e){return a(r(e))}}))},"5eda":function(e,t,i){var r=i("5ca1"),a=i("8378"),n=i("79e5");e.exports=function(e,t){var i=(a.Object||{})[e]||Object[e],o={};o[e]=t(i),r(r.S+r.F*n((function(){i(1)})),"Object",o)}},7654:function(e,t,i){"use strict";var r=i("287e"),a=i.n(r);a.a},8256:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tinymce-container",class:{fullscreen:e.fullscreen},style:{width:e.containerWidth}},[i("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}}),e._v(" "),i("div",{staticClass:"editor-custom-btn-container"},[i("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:e.imageSuccessCBK}})],1)])},a=[],n=(i("ac6a"),i("c5f6"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\n    本地图片上传\n  ")]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{name:"upload[]",multiple:!0,"file-list":e.fileList,"show-file-list":!0,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload,action:e.upImgURL,"list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("\n        点击 上传\n      ")])],1),e._v(" "),i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("\n      取消\n    ")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("\n      确认\n    ")])],1)],1)}),o=[],s=(i("456d"),i("cabd")),c={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{upImgURL:s["a"],dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var e=this;return Object.keys(this.listObj).every((function(t){return e.listObj[t].hasSuccess}))},handleSubmit:function(){var e=this,t=Object.keys(this.listObj).map((function(t){return e.listObj[t]}));this.checkAllSuccess()?(this.$emit("successCBK",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图像成功上载。如果有网络问题，请刷新页面并重新上传！")},handleSuccess:function(e,t,i){console.log(e,"file------");for(var r=t.uid,a=Object.keys(this.listObj),n=0,o=a.length;n<o;n++)if(this.listObj[a[n]].uid===r)return this.listObj[a[n]].url=e.files.file,void(this.listObj[a[n]].hasSuccess=!0)},handleRemove:function(e){for(var t=e.uid,i=Object.keys(this.listObj),r=0,a=i.length;r<a;r++)if(this.listObj[i[r]].uid===t)return void delete this.listObj[i[r]]},beforeUpload:function(e){var t=this,i=this,r=window.URL||window.webkitURL,a=e.uid;return this.listObj[a]={},new Promise((function(n,o){var s=new Image;s.src=r.createObjectURL(e),s.onload=function(){i.listObj[a]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},console.log(t.listObj,"---------log------"),n(!0)}))}}},l=c,u=(i("7654"),i("2877")),m=Object(u["a"])(l,n,o,!1,null,"0b4d82ca",null),d=m.exports,p=["advlist anchor autolink autosave code codesample    directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace  tabfocus table template  textpattern visualblocks visualchars wordcount toc fontselect lineheight "],f=p,h=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr lineheight fontselect toc fontsizeselect formatselect removeformat bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],b=h,g=i("2d63"),v=[];function _(){return window.tinymce}var y=function(e,t){var i=document.getElementById(e),r=t||function(){};if(!i){var a=document.createElement("script");a.src=e,a.id=e,document.body.appendChild(a),v.push(r);var n="onload"in a?o:s;n(a)}function o(t){t.onload=function(){this.onerror=this.onload=null;var e,i=Object(g["a"])(v);try{for(i.s();!(e=i.n()).done;){var r=e.value;r(null,t)}}catch(a){i.e(a)}finally{i.f()}v=null},t.onerror=function(){this.onerror=this.onload=null,r(new Error("Failed to load "+e),t)}}function s(e){e.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var t,i=Object(g["a"])(v);try{for(i.s();!(t=i.n()).done;){var r=t.value;r(null,e)}}catch(a){i.e(a)}finally{i.f()}v=null}}}i&&r&&(_()?r(null,i):v.push(r))},w=y,$="https://order.meishuquanyunxiao.com/myPackge/tinymce.min.js",x={name:"Tinymce",components:{editorImage:d},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{zh:"zh_CN"}}},computed:{containerWidth:function(){var e=this.width;return/^[\d]+(\.[\d]+)?$/.test(e)?"".concat(e,"px"):e}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(t.tinymceId).setContent(e||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var e=this;w($,(function(t){t?e.$message.error(t.message):e.initTinymce()}))},initTinymce:function(){var e=this,t=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language_url:"https://order.meishuquanyunxiao.com/myPackge/langs/zh_CN.js",language:this.languageTypeList["zh"],height:this.height,branding:!1,body_class:"panel-body ",object_resizing:!0,toolbar:this.toolbar.length>0?this.toolbar:b,menubar:this.menubar,plugins:f,end_container_on_empty_block:!0,powerpaste_word_import:"clean",textpattern_patterns:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],fontsize_formats:"8px 10px 12px 14px 18px 24px 36px",font_formats:"微软雅黑='微软雅黑';宋体='宋体';黑体='黑体';仿宋='仿宋';楷体='楷体';隶书='隶书';幼圆='幼圆';Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"default,circle,disc,square",advlist_number_styles:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman",imagetools_cors_hosts:["www.tinymce.com","codepen.io","127.0.0.1:8080"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){t.value&&i.setContent(t.value),t.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",(function(){e.hasChange=!0,e.$emit("input",i.getContent())}))},setup:function(e){e.on("FullscreenStateChanged",(function(e){t.fullscreen=e.state}))},convert_urls:!1})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){var t=this;e.forEach((function(e){window.tinymce.get(t.tinymceId).insertContent('<img class="wscnph" src="'.concat(e.url,'" >'))}))}}},k=x,I=(i("8389"),Object(u["a"])(k,r,a,!1,null,"d0342d0a",null));t["a"]=I.exports},8389:function(e,t,i){"use strict";var r=i("da5e"),a=i.n(r);a.a},a1f5:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"140px","label-position":"top"}},[i("el-form-item",{attrs:{label:"活动主题",width:"200px",prop:"name"}},[i("el-input",{staticStyle:{width:"600px"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"活动子主题",width:"200px",prop:"name"}},[i("el-input",{staticStyle:{width:"600px"},model:{value:e.form.sub_name,callback:function(t){e.$set(e.form,"sub_name",t)},expression:"form.sub_name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"首页拼单价",width:"200px",prop:"name"}},[i("el-input",{staticStyle:{width:"600px"},attrs:{type:"number"},model:{value:e.form.pin_price,callback:function(t){e.$set(e.form,"pin_price",t)},expression:"form.pin_price"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"首页单独购买价",width:"200px",prop:"name"}},[i("el-input",{staticStyle:{width:"600px"},attrs:{type:"number"},model:{value:e.form.pin_or_price,callback:function(t){e.$set(e.form,"pin_or_price",t)},expression:"form.pin_or_price"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"首页拼单描述",width:"200px",prop:"name"}},[i("el-input",{staticStyle:{width:"600px"},model:{value:e.form.pin_desc,callback:function(t){e.$set(e.form,"pin_desc",t)},expression:"form.pin_desc"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"活动主图(最多1张)",prop:"activePic"}},[i("el-upload",{attrs:{"file-list":e.fileList1,name:"file",limit:e.limitNum,action:e.url,"list-type":"picture-card","before-upload":e.beforeAvatarUpload,"on-preview":e.handlePictureCardPreview1,"on-success":e.handleSuccess1,"on-remove":e.handleRemove1}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible1},on:{"update:visible":function(t){e.dialogVisible1=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl1,alt:"主图"}})])],1),e._v(" "),i("el-form-item",{attrs:{label:"拼团流程图(最多1张)",prop:"pinPic"}},[i("el-upload",{attrs:{"file-list":e.fileList2,name:"file",limit:e.limitNum,action:e.url,"list-type":"picture-card","before-upload":e.beforeAvatarUpload,"on-preview":e.handlePictureCardPreview2,"on-success":e.handleSuccess2,"on-remove":e.handleRemove2}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible2},on:{"update:visible":function(t){e.dialogVisible2=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl2,alt:"流程图"}})])],1),e._v(" "),i("el-form-item",{attrs:{label:"课程日期",prop:"activeTime"}},[i("el-date-picker",{attrs:{type:"daterange",align:"right","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},model:{value:e.form.activeTime,callback:function(t){e.$set(e.form,"activeTime",t)},expression:"form.activeTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"内容详情",prop:"content"}},[i("Tinymce",{ref:"editor",attrs:{height:600},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),e._v(" "),i("div",[i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("立即创建")]),e._v(" "),i("el-button",[e._v("取消")])],1)])],1)},a=[],n=(i("c5f6"),i("96cf"),i("3b8d")),o=(i("7f7f"),i("db72")),s=i("8256"),c=i("cabd"),l=i("365c"),u=i("2f62"),m={name:"createIndex",components:{Tinymce:s["a"]},computed:Object(o["a"])({},Object(u["b"])(["name"])),data:function(){return{fileList1:this.$route.params&&this.$route.params.id?[{name:"",url:this.$route.params&&this.$route.params.active_pic}]:[],fileList2:this.$route.params&&this.$route.params.id?[{name:"",url:this.$route.params&&this.$route.params.pin_pic}]:[],form:{name:this.$route.params&&this.$route.params.name,sub_name:this.$route.params&&this.$route.params.sub_name,pin_price:this.$route.params&&this.$route.params.pin_price,pin_or_price:this.$route.params&&this.$route.params.pin_or_price,pin_desc:this.$route.params&&this.$route.params.pin_desc,activePic:this.$route.params&&this.$route.params.active_pic_str,pinPic:this.$route.params&&this.$route.params.pin_pic_str,activePicStr:this.$route.params&&this.$route.params.active_pic,pinPicStr:this.$route.params&&this.$route.params.pin_pic,content:this.$route.params&&this.$route.params.content,activeTime:[this.$route.params&&this.$route.params.active_start_time,this.$route.params&&this.$route.params.active_end_time]},rules:{name:[{required:!0,min:3,max:6,message:"长度在 3 到 6 个字符",trigger:"blur"}],sub_name:[{required:!0,min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],pin_price:[{required:!0,message:"填写小程序首页拼单价格",trigger:"blur"}],pin_or_price:[{required:!0,min:3,max:15,message:"填写小程序首页原单价",trigger:"blur"}],pin_desc:[{required:!0,min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],activePic:[{required:!0,message:"请上传主图",trigger:"blur"}],pinPic:[{required:!0,message:"请上传流程图",trigger:"blur"}],content:[{required:!0,message:"请编辑活动内容",trigger:"blur"}],activeTime:[{required:!0,message:"请填写活动时间",trigger:"blur"}]},limitNum:1,url:c["b"],dialogImageUrl1:this.$route.params&&this.$route.params.active_pic,dialogVisible1:!1,dialogImageUrl2:this.$route.params&&this.$route.params.pin_pic,dialogVisible2:!1}},methods:{onSubmit:function(e){var t=this;if(this.$route.params&&this.$route.params.id){var i=this.name;this.$refs[e].validate(function(){var r=Object(n["a"])(regeneratorRuntime.mark((function r(a){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=12;break}return n={id:t.$route.params&&Number(t.$route.params.id),name:t.form.name,sub_name:t.form.sub_name,pin_price:Number(t.form.pin_price),pin_or_price:Number(t.form.pin_or_price),pin_desc:t.form.pin_desc,active_pic:(t.form.activePicStr,t.form.activePic,t.form.activePic),pin_pic:(t.form.pinPicStr,t.form.pinPic,t.form.pinPic),content:t.form.content,active_start_time:t.form.activeTime[0],active_end_time:t.form.activeTime[1],create_people:i+"更新人=>"+i},r.next=4,Object(l["a"])(n).catch((function(e){return e}));case 4:if(o=r.sent,console.log(o),2e4===o.code){r.next=8;break}return r.abrupt("return",t.$message.error(o.msg));case 8:t.$refs[e].resetFields(),t.$router.go(-1),r.next=14;break;case 12:return console.log("error submit!!"),r.abrupt("return",!1);case 14:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}else{var r=this.name;this.$refs[e].validate(function(){var i=Object(n["a"])(regeneratorRuntime.mark((function i(a){var n,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!a){i.next=12;break}return n={name:t.form.name,sub_name:t.form.sub_name,pin_price:Number(t.form.pin_price),pin_or_price:Number(t.form.pin_or_price),pin_desc:t.form.pin_desc,active_pic:t.form.activePic,pin_pic:t.form.pinPic,content:t.form.content,active_start_time:t.form.activeTime[0],active_end_time:t.form.activeTime[1],create_people:r},i.next=4,Object(l["a"])(n).catch((function(e){return e}));case 4:if(o=i.sent,console.log(o),2e4===o.code){i.next=8;break}return i.abrupt("return",t.$message.error(o.msg));case 8:t.$refs[e].resetFields(),t.$router.go(-1),i.next=14;break;case 12:return console.log("error submit!!"),i.abrupt("return",!1);case 14:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())}},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,i=e.size/1024/1024<1;return t||this.$message.error("上传图片只能是 JPG 格式!"),i||this.$message.error("上传图片大小不能超过 1MB!"),t&&i},handleRemove1:function(e,t){console.log(e,t)},handlePictureCardPreview1:function(e){this.dialogImageUrl1=e.url,this.dialogVisible1=!0},handleSuccess1:function(e,t,i){this.dialogImageUrl1=e.files.file,this.form.activePic=e.files.imgName},handleRemove2:function(e,t){console.log(e,t)},handlePictureCardPreview2:function(e){this.dialogImageUrl2=e.url,this.dialogVisible2=!0},handleSuccess2:function(e,t,i){this.dialogImageUrl2=e.files.file,this.form.pinPic=e.files.imgName}}},d=m,p=i("2877"),f=Object(p["a"])(d,r,a,!1,null,"40465900",null);t["default"]=f.exports},aa77:function(e,t,i){var r=i("5ca1"),a=i("be13"),n=i("79e5"),o=i("fdef"),s="["+o+"]",c="​",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),m=function(e,t,i){var a={},s=n((function(){return!!o[e]()||c[e]()!=c})),l=a[e]=s?t(d):o[e];i&&(a[i]=l),r(r.P+r.F*s,"String",a)},d=m.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(u,"")),e};e.exports=m},c5f6:function(e,t,i){"use strict";var r=i("7726"),a=i("69a8"),n=i("2d95"),o=i("5dbc"),s=i("6a99"),c=i("79e5"),l=i("9093").f,u=i("11e9").f,m=i("86cc").f,d=i("aa77").trim,p="Number",f=r[p],h=f,b=f.prototype,g=n(i("2aeb")(b))==p,v="trim"in String.prototype,_=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():d(t,3);var i,r,a,n=t.charCodeAt(0);if(43===n||45===n){if(i=t.charCodeAt(2),88===i||120===i)return NaN}else if(48===n){switch(t.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+t}for(var o,c=t.slice(2),l=0,u=c.length;l<u;l++)if(o=c.charCodeAt(l),o<48||o>a)return NaN;return parseInt(c,r)}}return+t};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof f&&(g?c((function(){b.valueOf.call(i)})):n(i)!=p)?o(new h(_(t)),i,f):_(t)};for(var y,w=i("9e1e")?l(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),$=0;w.length>$;$++)a(h,y=w[$])&&!a(f,y)&&m(f,y,u(h,y));f.prototype=b,b.constructor=f,i("2aba")(r,p,f)}},cabd:function(e,t,i){"use strict";i.d(t,"d",(function(){return a})),i.d(t,"h",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"e",(function(){return s})),i.d(t,"f",(function(){return c})),i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return u})),i.d(t,"g",(function(){return m}));var r=i("b775");function a(e){return Object(r["a"])({url:"/api/v1/addcat",method:"post",data:e})}function n(){return Object(r["a"])({url:"/api/v1/getCourseCat",method:"post"})}function o(e){return Object(r["a"])({url:"/api/v1/createCourseBook",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/api/v1/book/delbooks",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/api/v1/book/getbooks",method:"post",data:e})}var l="https://order.meishuquanyunxiao.com/api/v1/upload",u="https://order.meishuquanyunxiao.com/admin/weChatIndex/uploadImg";function m(e){return Object(r["a"])({url:"/admin/courseDetail",method:"post",data:e})}},da5e:function(e,t,i){},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);